<!DOCTYPE html>
<html>
    <title>Rock, Paper, Scissors</title>
    <script>


        let playerScore = 0;
        let computerScore = 0;
        let rounds = 0;


        function computerPlay() { // Decides what the computer will play
                const choices = ["rock", "paper", "scissors"];
                const rand = Math.floor(Math.random() * 3);

                return choices[rand]
        }
        function gamePlay(playerSelection, computerSelection){ // Decides who wins the round
            if (computerSelection === playerSelection){
                return "Draw";
            } else if (playerSelection === "rock"){
                if (computerSelection === "scissors"){
                    return "Win"
                } else {
                    return "Lose"
                }
            } else if (playerSelection === "paper"){
                if (computerSelection === "rock"){
                    return "Win"
                } else {
                    return "Lose"
                }
            } else if (playerSelection === "scissors"){
                if (computerSelection === "paper"){
                    return "Win"
                } else {
                    return "Lose"
                }
            }
            
        }
        function letsPlay(){ // plays a round and declares winner
            const player = prompt("what is your choice?\n Rock, Paper or Scissors only");
            const playerSelection = player.toLowerCase();
            const computerSelection = computerPlay();
            const result = gamePlay(playerSelection, computerSelection);
            if (result == "Win"){
                rounds += 1
                playerScore += 1
                console.log("You win! " + playerSelection + " beats " + computerSelection + "\n Player: " + playerScore + " vs " + computerScore + " :Computer.")
                roundChecker();
            } else if (result == "Lose"){
                rounds += 1
                computerScore += 1
                console.log("You lose! " + computerSelection + " beats " + playerSelection + "\n Player: " + playerScore + " vs " + computerScore + " :Computer.")
                roundChecker();
            } else {
                rounds += 1
                console.log("It's a draw! You both picked " + playerSelection + "\n Player: " + playerScore + " vs " + computerScore + " :Computer.")
                roundChecker();
            }
        }

       function coinToss(){ // Tosses a coin to decide winner
           const coinChoice = prompt("Heads or Tails?").toLowerCase();
           const coins = ["heads", "tails"];
           const coinFlip = coins[Math.floor(Math.random() * 2)];
           if (coinFlip === coinChoice){
               console.log("And it's " + coinChoice)
               playerScore += 1
                whoWins();
           }else{ 
               console.log("Not today pal!")
               computerScore += 1
               whoWins();
               }
       }


        function whoWins(){ // winner of overall game
            if (playerScore > computerScore){ 
                console.log("Winner, Winner, Chicken dinner final scores:\nPlayer: " + playerScore + " vs " + computerScore + " :Computer.");
            } else if (computerScore > playerScore){
                console.log("try again, LOOOOSER!!");
            } else {
                (console.log("You suck so much you drew!\n But we will let you toss a coin...."))
                coinToss()
                }
        }

        function roundChecker(){ // Checks round count and plays a round 
            if (rounds < 5){
                letsPlay();
            } else whoWins();
        }
        roundChecker()
    </script>
</html>